
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>c04-boats &#8212; Data Science for Engineers</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Data Science for Engineers</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../frontmatter/home.html">
   Data Science for Engineers
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../frontmatter/setup.html">
   Software Setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../frontmatter/howto.html">
   How To Use These Materials
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../frontmatter/exercises.html">
   Exercise Solutions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d01-e-data00-notebooks-solution.html">
     Introduction to Jupyter Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d01-e-vis00-basics-solution.html">
     Data Visualization Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d02-e-data01-isolate-solution.html">
     Data Isolation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d03-e-stat01-eda-solution.html">
     Introduction to Exploratory Data Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d04-e-grama01-basics-solution.html">
     Grama Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d05-e-vis01-bar-charts-solution.html">
     Bar Charts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d08-e-stat02-source-solution.html">
     Sources of Variability: Real vs. Error
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d10-e-grama02-building-solution.html">
     Grama Model Building
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d12-e-grama03-eval-solution.html">
     Grama Model Evaluation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d14-e-stat03-descriptive-solution.html">
     Descriptive Statistics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d15-e-data04-separate-unite-solution.html">
     Data: Separating and Uniting Columns
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d16-e-data05-join-solution.html">
     Data: Joining Datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d17-e-vis05-multiples-solution.html">
     Small Multiples
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d18-e-grama04-ema-solution.html">
     Exploratory Model Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d19-e-stat04-distributions-solution.html">
     Distributions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d20-e-grama05-fit-function-solution.html">
     Fitting Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d21-e-stat05-CI-solution.html">
     Confidence Intervals and the CLT
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d22-e-stat06-spc-solution.html">
     Fundamentals of Statistical Process Monitoring
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d23-e-grama06-fit-univar-solution.html">
     Fitting Univariate Distributions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d24-e-grama07-fit-multivar-solution.html">
     Fitting Multivariate Distributions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../exercises_solution/d25-e-grama08-duu-solution.html">
     Design Under Uncertainty
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/challenges_assignment/c04-boats-assignment.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/challenges_assignment/c04-boats-assignment.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   c04-boats
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#context">
   Context
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basics-of-boat-hull-design">
     Basics of Boat Hull Design
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#upright-stability">
     Upright Stability
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#archival-data">
     Archival Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-dictionary">
       Data Dictionary
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#guided-eda-of-archival-data">
   Guided EDA of Archival Data
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q1-first-look">
     <strong>
      q1
     </strong>
     First look
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q2-how-many-designs-are-upright-stable">
     <strong>
      q2
     </strong>
     How many designs are upright-stable?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hypothesis-width-controls-upright-stability">
     Hypothesis: Width controls upright stability
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#q3-correlation-tile-plot">
       <strong>
        q3
       </strong>
       Correlation tile plot
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#q4-detailed-scatterplots">
       <strong>
        q4
       </strong>
       Detailed scatterplots
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#model-setup">
   Model Setup
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q5-time-the-analysis">
     <strong>
      q5
     </strong>
     Time the analysis
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q6-define-the-input-order">
     <strong>
      q6
     </strong>
     Define the input order
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q7-assemble-the-model">
     <strong>
      q7
     </strong>
     Assemble the model
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ema-with-expensive-models">
   EMA with Expensive Models
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q8-plan-a-study">
     <strong>
      q8
     </strong>
     Plan a study
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q9-run-the-study">
     <strong>
      q9
     </strong>
     Run the study
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>c04-boats</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   c04-boats
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#context">
   Context
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basics-of-boat-hull-design">
     Basics of Boat Hull Design
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#upright-stability">
     Upright Stability
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#archival-data">
     Archival Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-dictionary">
       Data Dictionary
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#guided-eda-of-archival-data">
   Guided EDA of Archival Data
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q1-first-look">
     <strong>
      q1
     </strong>
     First look
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q2-how-many-designs-are-upright-stable">
     <strong>
      q2
     </strong>
     How many designs are upright-stable?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hypothesis-width-controls-upright-stability">
     Hypothesis: Width controls upright stability
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#q3-correlation-tile-plot">
       <strong>
        q3
       </strong>
       Correlation tile plot
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#q4-detailed-scatterplots">
       <strong>
        q4
       </strong>
       Detailed scatterplots
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#model-setup">
   Model Setup
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q5-time-the-analysis">
     <strong>
      q5
     </strong>
     Time the analysis
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q6-define-the-input-order">
     <strong>
      q6
     </strong>
     Define the input order
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q7-assemble-the-model">
     <strong>
      q7
     </strong>
     Assemble the model
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ema-with-expensive-models">
   EMA with Expensive Models
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q8-plan-a-study">
     <strong>
      q8
     </strong>
     Plan a study
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#q9-run-the-study">
     <strong>
      q9
     </strong>
     Run the study
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="c04-boats">
<h1>c04-boats<a class="headerlink" href="#c04-boats" title="Permalink to this headline">¶</a></h1>
<p><em>Purpose</em>: Exploratory model analysis is a way to learn about a model and thus the scenario that it describes. However, computationally-expensive models are challenging to study with EMA, as every function evaluation costs us a lot of compute time. This challenge is about applying EMA ideas to learn about boat hull design, and about interfacing with a more computationally-complex simulation code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">grama</span> <span class="k">as</span> <span class="nn">gr</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">DF</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Intention</span><span class="p">()</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="context">
<h1>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h1>
<p>This challenge comes with an additional simulation code written in Python. The code is in the file <code class="docutils literal notranslate"><span class="pre">boat_utils.py</span></code>, which you can inspect if you’re interested. For the purposes of this challenge, you only need to load the simulation tools, and read the basics detailed below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Boat analysis code</span>
<span class="kn">import</span> <span class="nn">boat_utils</span> <span class="k">as</span> <span class="nn">boat</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="basics-of-boat-hull-design">
<h2>Basics of Boat Hull Design<a class="headerlink" href="#basics-of-boat-hull-design" title="Permalink to this headline">¶</a></h2>
<p>In order to float safely, a boat has to displace enough water to support its mass, and rotate back to upright as it is rolled by waves and wind. This desired behavior is governed by a surprisingly complex interplay between geometric and mass distribution factors in the boat’s design. The following graphic depicts the cross-section of a simple boat hull, rotated <span class="math notranslate nohighlight">\(30^{\circ}\)</span> from its upright position.</p>
<p><img alt="Boat diagram" src="../_images/c04-boat-diagram.png" /></p>
<p>Gravity applies a downward force at the center of mass (G), while buoyancy applies an upward force at the center of buoyancy (B’). These two forces apply a torque that rolls the boat—hopefully back towards its upright position! Naval engineers analyze this behavior using the <em>statical stability curve</em>—this is what the provided boat simulation tools compute.</p>
<p>The following is a statical stability curve for an example boat hull.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: No need to edit; this will analyze an example boat</span>
<span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">v_design</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.30</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">]</span>
<span class="n">df_example</span> <span class="o">=</span> <span class="n">boat</span><span class="o">.</span><span class="n">fun_moment</span><span class="p">(</span><span class="n">v_design</span><span class="p">)</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Execution time: </span><span class="si">{0:4.3f}</span><span class="s2"> sec&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">))</span>

<span class="p">(</span>
    <span class="c1"># Visualize the moment curve</span>
    <span class="n">df_example</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;angle * 180/3.14&quot;</span><span class="p">,</span> <span class="s2">&quot;M_net&quot;</span><span class="p">))</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_line</span><span class="p">()</span>
    
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">scale_color_discrete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">theme_minimal</span><span class="p">()</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">labs</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Boat Angle (Degrees)&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;Net Moment (lbf * in)&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Some things worth noting about this example:</p>
<ul class="simple">
<li><p>The Boat Angle is the angle to which the boat hull is rotated (along its long axis).</p></li>
<li><p>When the net moment is negative, a restoring torque acts to turn the boat back to upright.</p></li>
<li><p>When the net moment is positive, an anti-restoring torque is applied.</p></li>
</ul>
<!-- - The point where the moment curve passes through the axis `M_net == 0` with positive slope is called the *angle of vanishing stability* (AVS). Rotating the boat beyond this point will cause it to settle upside-down. -->
<ul class="simple">
<li><p>The boat analysis takes a non-trivial amount of time to run! Analyzing a large number of boat designs will take a fair amount of simulation time.</p></li>
</ul>
</div>
<div class="section" id="upright-stability">
<h2>Upright Stability<a class="headerlink" href="#upright-stability" title="Permalink to this headline">¶</a></h2>
<p>Note that upright stability is <em>not</em> guaranteed, even when comparing boats of identical geometry. Upright stability depends on a <em>restoring</em> moment acting when the boat is rotated away from upright.</p>
<blockquote>
<div><p>For a boat to be upright-stable, the slope of its moment curve must be <strong>negative</strong> at the angle <span class="math notranslate nohighlight">\(\theta = 0^{\circ}\)</span>.</p>
</div></blockquote>
<p>The following boat has identical hull geometry as the previous case, but is lighter (smaller <code class="docutils literal notranslate"><span class="pre">d</span></code>) and has a higher center of mass (larger <code class="docutils literal notranslate"><span class="pre">f_com</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: No need to edit; this will analyze an example boat</span>
<span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">v_light</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.20</span><span class="p">,</span> <span class="mf">0.40</span><span class="p">]</span>
<span class="n">df_light</span> <span class="o">=</span> <span class="n">boat</span><span class="o">.</span><span class="n">fun_moment</span><span class="p">(</span><span class="n">v_light</span><span class="p">)</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Execution time: </span><span class="si">{0:4.3f}</span><span class="s2"> sec&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">))</span>

<span class="p">(</span>
    <span class="c1"># Visualize the moment curve</span>
    <span class="n">df_light</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s2">&quot;Light loading&quot;</span><span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_bind_rows</span><span class="p">(</span>
        <span class="n">df_example</span>
        <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">tf_mutate</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s2">&quot;Baseline&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">gr</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s2">&quot;angle * 180/3.14&quot;</span><span class="p">,</span> <span class="s2">&quot;M_net&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">))</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">geom_line</span><span class="p">()</span>
    
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">scale_color_discrete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">theme_minimal</span><span class="p">()</span>
    <span class="o">+</span> <span class="n">gr</span><span class="o">.</span><span class="n">labs</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Boat Angle (Degrees)&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;Net Moment (lbf * in)&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note that the loading conditions of the boat have destabilized it at upright; the slope of the moment curve at <span class="math notranslate nohighlight">\(0^{\circ}\)</span> is now positive.</p>
<p>This phenomenon is dangerous for vessels that must operate in both heavily-loaded and lightly-loaded conditions: Imagine a large transport ship in-harbor that has just unloaded cargo. The destabilizing phenomenon we see here would put the crew and dockworkers in considerable danger.</p>
<div class="admonition-developing-insight-through-ema admonition">
<p class="admonition-title">Developing insight through EMA</p>
<p>The traditional way to learn about boat stability is to carry out a variety of analytical derivations. In this challenge, you will use computational EMA tools to build some intuition about how design variables affect boat stability.</p>
</div>
</div>
<div class="section" id="archival-data">
<h2>Archival Data<a class="headerlink" href="#archival-data" title="Permalink to this headline">¶</a></h2>
<p>For this challenge, you have available a set of pre-computed simulation results. The following code loads this archival dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: No need to edit; load the archival data</span>
<span class="n">filename_archival</span> <span class="o">=</span> <span class="s2">&quot;./data/doe-wide.csv&quot;</span>
<span class="n">df_archival</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename_archival</span><span class="p">)</span>
<span class="n">df_archival</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="data-dictionary">
<h3>Data Dictionary<a class="headerlink" href="#data-dictionary" title="Permalink to this headline">¶</a></h3>
<p>There is <em>a lot</em> of information available in this dataset; the following is a summary of what’s in the data:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>I/O</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d</span></code></p></td>
<td><p>Input</p></td>
<td><p>Displacement ratio (-)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Input</p></td>
<td><p>Shape factor (-)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">f_com</span></code></p></td>
<td><p>Input</p></td>
<td><p>Height of COM from boat bottom (-)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">H</span></code></p></td>
<td><p>Input</p></td>
<td><p>Height of boat (in)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">W</span></code></p></td>
<td><p>Input</p></td>
<td><p>Width of boat (in)</p></td>
</tr>
<tr class="row-odd"><td><p>—</p></td>
<td><p>—</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">M_max</span></code></p></td>
<td><p>Output</p></td>
<td><p>Max righting moment (<code class="docutils literal notranslate"><span class="pre">lbf*in</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">M_min</span></code></p></td>
<td><p>Output</p></td>
<td><p>Min righting moment (<code class="docutils literal notranslate"><span class="pre">lbf*in</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mass</span></code></p></td>
<td><p>Output</p></td>
<td><p>Boat mass (lb)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dMdtheta_avs</span></code></p></td>
<td><p>Output</p></td>
<td><p>Slope of moment curve at AVS (<code class="docutils literal notranslate"><span class="pre">lbf</span> <span class="pre">in/rad</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dMdtheta_0</span></code></p></td>
<td><p>Output</p></td>
<td><p>Slope of moment curve at upright (<code class="docutils literal notranslate"><span class="pre">lbf*in/rad</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int_M_stable</span></code></p></td>
<td><p>Output</p></td>
<td><p>Integral of moment curve, up to the AVS (<code class="docutils literal notranslate"><span class="pre">lbf*in*rad</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BM</span></code></p></td>
<td><p>Output</p></td>
<td><p>Metacentric radius (in)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">GM</span></code></p></td>
<td><p>Output</p></td>
<td><p>Metacentric height (in)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">angle</span></code></p></td>
<td><p>Output</p></td>
<td><p>Angle of vanishing stability (rad)</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: No need to edit; list out the variable names</span>
<span class="n">var</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;f_com&quot;</span><span class="p">,</span> <span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">]</span>
<span class="n">out</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;M_max&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;M_min&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;mass&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;dMdtheta_avs&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;dMdtheta_0&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;BM&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;GM&quot;</span><span class="p">,</span>
    <span class="s2">&quot;angle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;int_M_stable&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="guided-eda-of-archival-data">
<h1>Guided EDA of Archival Data<a class="headerlink" href="#guided-eda-of-archival-data" title="Permalink to this headline">¶</a></h1>
<p>Before going to EMA, let’s start with an EDA of the archival data. This will help us frame the model work to come later.</p>
<div class="section" id="q1-first-look">
<h2><strong>q1</strong> First look<a class="headerlink" href="#q1-first-look" title="Permalink to this headline">¶</a></h2>
<p>Use simple EDA techniques to answer the questions under <em>observations</em> below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># TASK: Perform simple EDA, answer the questions below</span>
<span class="p">(</span>
    <span class="n">df_archival</span>

<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><em>Observations</em></p>
<ul class="simple">
<li><p>How many observations (distinct boat hulls) are there in-total?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
<li><p>What are rough bounds for each of the input variables? (You’ll use these in a later task….)</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="q2-how-many-designs-are-upright-stable">
<h2><strong>q2</strong> How many designs are upright-stable?<a class="headerlink" href="#q2-how-many-designs-are-upright-stable" title="Permalink to this headline">¶</a></h2>
<p>Remember that upright-stable means the slope of the moment curve at an upright position is negative. Answer the questions under <em>observations</em> below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_archival</span>

<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><em>Observations</em></p>
<ul class="simple">
<li><p>How many boat designs in the dataset are upright-stable?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
<li><p>What <em>fraction</em> of boat designs in the dataset are upright-stable?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="hypothesis-width-controls-upright-stability">
<h2>Hypothesis: Width controls upright stability<a class="headerlink" href="#hypothesis-width-controls-upright-stability" title="Permalink to this headline">¶</a></h2>
<p>To help frame the rest of this challenge, let’s pose and assess a particular hypothesis:</p>
<blockquote>
<div><p>A wider boat will tend to have greater upright stability. Thus, we can make a boat stable by making it wider.</p>
</div></blockquote>
<p>This seems intuitive, but is it true? Let’s find out!</p>
<div class="section" id="q3-correlation-tile-plot">
<h3><strong>q3</strong> Correlation tile plot<a class="headerlink" href="#q3-correlation-tile-plot" title="Permalink to this headline">¶</a></h3>
<p>Construct a correlation tile plot to study the input/output relationships. Answer the questions under <em>observations</em> below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df_archival</span>
    <span class="c1">## Compute the input/output correlation data here</span>

    <span class="c1">## NOTE: No need to edit; this will visualize your data</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">pt_auto</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><em>Observations</em></p>
<ul class="simple">
<li><p>Which inputs correlate strongly with the slope of the moment curve at upright (<code class="docutils literal notranslate"><span class="pre">dMdtheta_0</span></code>)?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
<li><p>For each of the inputs you identified above, what is the sign of the correlation? (Positive or negative?) For each input, what kind of change (increase or decrease) is required to increase upright stability?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
<li><p>How do these results relate to the hypothesis above?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="q4-detailed-scatterplots">
<h3><strong>q4</strong> Detailed scatterplots<a class="headerlink" href="#q4-detailed-scatterplots" title="Permalink to this headline">¶</a></h3>
<p>Make scatterplots to study relationship between <code class="docutils literal notranslate"><span class="pre">dMdtheta_0</span></code> and the relevant inputs you identified above. Add a smooth trend to each scatterplot with <code class="docutils literal notranslate"><span class="pre">gr.geom_smooth()</span></code>. Answer the questions under <em>observations</em> below.</p>
<p><em>Hint</em>: While it is possible to construct all three plots in a single code cell, you should feel free to create additional cells as-necessary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO: Create scatterplots</span>
</pre></div>
</div>
</div>
</div>
<p><em>Observations</em></p>
<ul class="simple">
<li><p>Is the observed variability real or erroneous?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
<li><p>Describe the effects of each input on the output <code class="docutils literal notranslate"><span class="pre">dMdtheta_0</span></code>.</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
<li><p>Do any of the inputs have a more <em>predictable</em> effect on <code class="docutils literal notranslate"><span class="pre">dMdtheta_0</span></code>?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
<li><p>How do these results relate to the hypothesis above?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
</ul>
<p>Having carried out an EDA of the archival data, we can move on to studying behavior using the model. However, first we need to <em>setup</em> the model.</p>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="model-setup">
<h1>Model Setup<a class="headerlink" href="#model-setup" title="Permalink to this headline">¶</a></h1>
<p>The primary tool we need from the boat simulation utilities is the performance function, called like so:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.30</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">]</span>
<span class="n">df_res</span> <span class="o">=</span> <span class="n">boat</span><span class="o">.</span><span class="n">fun_performance</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<p>We will use this function to compute performance metrics (such as <code class="docutils literal notranslate"><span class="pre">dMdtheta_0</span></code>) for various boat designs. However, before we do so, we should quantify how long it takes to run the performance function. Doing so will help us <em>plan</em> our EMA evaluations, so that we don’t try to execute a study that will take too long.</p>
<div class="section" id="q5-time-the-analysis">
<h2><strong>q5</strong> Time the analysis<a class="headerlink" href="#q5-time-the-analysis" title="Permalink to this headline">¶</a></h2>
<p>Evaluate the boat performance function <em>inside</em> the loop below in order to complete the timing study.</p>
<p><em>Hint</em>: Remember that <code class="docutils literal notranslate"><span class="pre">v_design</span></code> was assigned above in an example chunk. You can use that as the argument to <code class="docutils literal notranslate"><span class="pre">fun_performance()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n_rep</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_rep</span><span class="p">):</span>
    <span class="c1"># Evaluate the boat performance function here to</span>
    <span class="c1"># complete the timing study</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">t_exec</span> <span class="o">=</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_rep</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Average execution time: </span><span class="si">{0:}</span><span class="s2"> sec&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t_exec</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="q6-define-the-input-order">
<h2><strong>q6</strong> Define the input order<a class="headerlink" href="#q6-define-the-input-order" title="Permalink to this headline">¶</a></h2>
<p>List the inputs to <code class="docutils literal notranslate"><span class="pre">boat.fun_performance()</span></code> in the correct order. You will use this to assemble the model below.</p>
<p><em>Hint</em>: Remember to consult the documentation for <code class="docutils literal notranslate"><span class="pre">boat.fun_performance()</span></code> to see the order of its arguments.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## TODO:</span>
<span class="n">var_performance</span> <span class="o">=</span> <span class="p">[]</span>


<span class="c1">## NOTE: No need to edit; this defines the output quantities</span>
<span class="n">out_performance</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;mass&quot;</span><span class="p">,</span>
    <span class="s2">&quot;GM&quot;</span><span class="p">,</span>
    <span class="s2">&quot;angle&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dMdtheta_0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dMdtheta_avs&quot;</span><span class="p">,</span>
    <span class="s2">&quot;M_max&quot;</span><span class="p">,</span>
    <span class="s2">&quot;M_min&quot;</span><span class="p">,</span>
    <span class="s2">&quot;int_M_stable&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1">## NOTE: No need to edit; use this to check your work</span>
<span class="k">assert</span> \
    <span class="nb">set</span><span class="p">(</span><span class="n">var_performance</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">boat</span><span class="o">.</span><span class="n">var_correct</span><span class="p">),</span> \
    <span class="s2">&quot;Inputs not correct&quot;</span>
<span class="k">assert</span> \
    <span class="n">var_performance</span> <span class="o">==</span> <span class="n">boat</span><span class="o">.</span><span class="n">var_correct</span><span class="p">,</span> \
    <span class="s2">&quot;Inputs are not in the correct order; check &quot;</span> <span class="o">+</span> \
    <span class="s2">&quot;the documentation for boat.fun_performance().&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition-why-does-order-matter admonition">
<p class="admonition-title">Why does order matter?</p>
<p>By default, Python functions interpret their inputs based on <strong>order</strong>. Grama takes care of variables based on <strong>name</strong>, but when working with a “regular” Python function, we have to be careful to give grama the correct order information. Imagine giving the value for boat height <code class="docutils literal notranslate"><span class="pre">H</span></code> as the shape factor <code class="docutils literal notranslate"><span class="pre">n</span></code>, or vice versa! If we are careful when defining a grama model, we can prevent these order issues later.</p>
</div>
</div>
<div class="section" id="q7-assemble-the-model">
<h2><strong>q7</strong> Assemble the model<a class="headerlink" href="#q7-assemble-the-model" title="Permalink to this headline">¶</a></h2>
<p>Complete the code below to assemple the boat performance model. Use the values assigned above as arguments to <code class="docutils literal notranslate"><span class="pre">gr.cp_function()</span></code>, including the variable names, output names, and runtime estimate. Make sure to add bounds for the inputs that “enclose” the observed archival data.</p>
<p>```{admonition} Why not <code class="docutils literal notranslate"><span class="pre">gr.cp_vec_function()</span></code>?
Here we use <code class="docutils literal notranslate"><span class="pre">gr.cp_function()</span></code> rather than <code class="docutils literal notranslate"><span class="pre">gr.cp_vec_function()</span></code>. This is because the boat performance function is not <em>vectorized</em>; it cannot take a DataFrame as its input. Generally we use <code class="docutils literal notranslate"><span class="pre">gr.cp_function()</span></code> with more “expensive” to evaluate functions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## TODO: Complete the code below</span>
<span class="n">md_performance</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">gr</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="s2">&quot;Boat performance&quot;</span><span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">cp_function</span><span class="p">(</span>
        <span class="n">fun</span><span class="o">=</span><span class="n">boat</span><span class="o">.</span><span class="n">fun_performance</span><span class="p">,</span>
        <span class="c1"># Add input and output names;</span>
        <span class="c1"># runtime estimate</span>

    <span class="p">)</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">cp_bounds</span><span class="p">(</span>
        <span class="c1"># Add input bounds</span>

    <span class="p">)</span>
<span class="p">)</span>

<span class="c1">## NOTE: No need to edit; use this to check your work</span>
<span class="k">assert</span> \
    <span class="n">md_performance</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">runtime</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> \
    <span class="s2">&quot;Model has no runtime estimate&quot;</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">var_performance</span><span class="p">:</span>
    <span class="k">assert</span> \
        <span class="n">md_performance</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">df_archival</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> \
        <span class="s2">&quot;Archival data for </span><span class="si">{}</span><span class="s2"> exceeds model lower bound&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">assert</span> \
        <span class="n">df_archival</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">md_performance</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> \
        <span class="s2">&quot;Archival data for </span><span class="si">{}</span><span class="s2"> exceeds model upper bound&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="n">md_performance</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ema-with-expensive-models">
<h1>EMA with Expensive Models<a class="headerlink" href="#ema-with-expensive-models" title="Permalink to this headline">¶</a></h1>
<p>We’ve seen trends in the detailed scatterplots, but we should confirm them with the real model. A sinew plot will help us confirm what we saw above and better-assess the width hypothesis.</p>
<p><em>However</em>, note that the analysis code we’re using has a nontrivial runtime; we should be careful about how many evaluations we request or we could be waiting a <em>long</em> time for the simulation to run. The following task will guide you through balancing runtime with exploring the model’s behavior.</p>
<div class="section" id="q8-plan-a-study">
<h2><strong>q8</strong> Plan a study<a class="headerlink" href="#q8-plan-a-study" title="Permalink to this headline">¶</a></h2>
<p>Tune the arguments to achieve a “reasonable” runtime. You will need to decide for yourself what a reasonable runtime is (though it will at a minimum be ~3 minutes.) Answer the questions under <em>observations</em> below.</p>
<p><em>Hint 1</em>: Remember to use the documentation for a function to see which arguments to <code class="docutils literal notranslate"><span class="pre">gr.ev_sinews()</span></code> you can tune.</p>
<p><em>Hint 2</em>: Running at least three sweeps will help with the task that comes after this one.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## TODO: Tune the arguments for gr.ev_sinews()</span>
<span class="c1"># to get a &quot;reasonable&quot; runtime</span>
<span class="p">(</span>
    <span class="n">md_performance</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ev_sinews</span><span class="p">(</span>
        <span class="n">df_det</span><span class="o">=</span><span class="s2">&quot;swp&quot;</span><span class="p">,</span> <span class="c1"># Sweep all deterministic inputs</span>
        <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>    <span class="c1"># This prevents execution!</span>

    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><em>Observations</em></p>
<ul class="simple">
<li><p>What is the predicted runtime?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="q9-run-the-study">
<h2><strong>q9</strong> Run the study<a class="headerlink" href="#q9-run-the-study" title="Permalink to this headline">¶</a></h2>
<p>Now, use the settings you determined above and run the study! Answer the questions under <em>observations</em> below.</p>
<p><em>Note</em>: It’s a good idea to set this to run, go make yourself a coffee, then come back!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">df_sinews</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">md_performance</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">ev_sinews</span><span class="p">(</span>
        <span class="n">df_det</span><span class="o">=</span><span class="s2">&quot;swp&quot;</span><span class="p">,</span> <span class="c1"># Sweep all deterministic inputs</span>
        <span class="c1">## Use the same settings you determined above</span>

    <span class="p">)</span>
<span class="p">)</span>
<span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Execution time: </span><span class="si">{}</span><span class="s2"> sec&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>Once the evaluation is complete, visualize the results with the following code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NOTE: No need to edit; use this to visualize the results</span>
<span class="p">(</span>
    <span class="n">df_sinews</span>
    <span class="o">&gt;&gt;</span> <span class="n">gr</span><span class="o">.</span><span class="n">pt_auto</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><em>Observations</em></p>
<ul class="simple">
<li><p>How close to the predicted runtime is the actual runtime?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
<li><p>Consider the variables you identified above that affect <code class="docutils literal notranslate"><span class="pre">dMdtheta_0</span></code>. Do they have a <em>consistent</em> effect on upright stability, or does their effect depend on the value of other inputs?</p>
<ul>
<li><p>(Your response here)</p></li>
</ul>
</li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./challenges_assignment"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Zachary del Rosario<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>